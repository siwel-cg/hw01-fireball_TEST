(()=>{var t={242:(t,e,i)=>{"use strict";t.exports=function(t,e){t=t||document.body;var i=[.01,1/0];"distanceLimits"in(e=e||{})&&(i[0]=e.distanceLimits[0],i[1]=e.distanceLimits[1]),"zoomMin"in e&&(i[0]=e.zoomMin),"zoomMax"in e&&(i[1]=e.zoomMax);var h=n({center:e.center||[0,0,0],up:e.up||[0,1,0],eye:e.eye||[0,0,10],mode:e.mode||"orbit",distanceLimits:i}),c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d=0,l=t.clientWidth,f=t.clientHeight,p={view:h,element:t,delay:e.delay||16,rotateSpeed:e.rotateSpeed||1,zoomSpeed:e.zoomSpeed||1,translateSpeed:e.translateSpeed||1,flipX:!!e.flipX,flipY:!!e.flipY,modes:h.modes,tick:function(){var e=r(),i=this.delay;h.idle(e-i),h.flush(e-(100+2*i));var n=e-2*i;h.recalcMatrix(n);for(var s=!0,o=h.computedMatrix,a=0;a<16;++a)s=s&&c[a]===o[a],c[a]=o[a];var u=t.clientWidth===l&&t.clientHeight===f;return l=t.clientWidth,f=t.clientHeight,s?!u:(d=Math.exp(h.computedRadius[0]),!0)},lookAt:function(t,e,i){h.lookAt(h.lastT(),t,e,i)},rotate:function(t,e,i){h.rotate(h.lastT(),t,e,i)},pan:function(t,e,i){h.pan(h.lastT(),t,e,i)},translate:function(t,e,i){h.translate(h.lastT(),t,e,i)}};Object.defineProperties(p,{matrix:{get:function(){return h.computedMatrix},set:function(t){return h.setMatrix(h.lastT(),t),h.computedMatrix},enumerable:!0},mode:{get:function(){return h.getMode()},set:function(t){return h.setMode(t),h.getMode()},enumerable:!0},center:{get:function(){return h.computedCenter},set:function(t){return h.lookAt(h.lastT(),t),h.computedCenter},enumerable:!0},eye:{get:function(){return h.computedEye},set:function(t){return h.lookAt(h.lastT(),null,t),h.computedEye},enumerable:!0},up:{get:function(){return h.computedUp},set:function(t){return h.lookAt(h.lastT(),null,null,t),h.computedUp},enumerable:!0},distance:{get:function(){return d},set:function(t){return h.setDistance(h.lastT(),t),t},enumerable:!0},distanceLimits:{get:function(){return h.getDistanceLimits(i)},set:function(t){return h.setDistanceLimits(t),t},enumerable:!0}}),t.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1}));var v=0,m=0,M={shift:!1,control:!1,alt:!1,meta:!1};function g(e,i,n,s){var o=1/t.clientHeight,a=o*(i-v),u=o*(n-m),c=p.flipX?1:-1,l=p.flipY?1:-1,f=Math.PI*p.rotateSpeed,g=r();if(1&e)s.shift?h.rotate(g,0,0,-a*f):h.rotate(g,c*f*a,-l*f*u,0);else if(2&e)h.pan(g,-p.translateSpeed*a*d,p.translateSpeed*u*d,0);else if(4&e){var x=p.zoomSpeed*u/window.innerHeight*(g-h.lastT())*50;h.pan(g,0,0,d*(Math.exp(x)-1))}v=i,m=n,M=s}return s(t,g),t.addEventListener("touchstart",(function(e){var i=a(e.changedTouches[0],t);g(0,i[0],i[1],M),g(1,i[0],i[1],M),e.preventDefault()}),!!u&&{passive:!1}),t.addEventListener("touchmove",(function(e){var i=a(e.changedTouches[0],t);g(1,i[0],i[1],M),e.preventDefault()}),!!u&&{passive:!1}),t.addEventListener("touchend",(function(e){a(e.changedTouches[0],t),g(0,v,m,M),e.preventDefault()}),!!u&&{passive:!1}),o(t,(function(t,e,i){var n=p.flipX?1:-1,s=p.flipY?1:-1,o=r();if(Math.abs(t)>Math.abs(e))h.rotate(o,0,0,-t*n*Math.PI*p.rotateSpeed/window.innerWidth);else{var a=p.zoomSpeed*s*e/window.innerHeight*(o-h.lastT())/100;h.pan(o,0,0,d*(Math.exp(a)-1))}}),!0),p};var r=i(716),n=i(55),s=i(702),o=i(81),a=i(715),u=i(887)},55:(t,e,i)=>{"use strict";t.exports=function(t){var e=(t=t||{}).eye||[0,0,1],i=t.center||[0,0,0],a=t.up||[0,1,0],u=t.distanceLimits||[0,1/0],h=t.mode||"turntable",c=r(),d=n(),l=s();return c.setDistanceLimits(u[0],u[1]),c.lookAt(0,e,i,a),d.setDistanceLimits(u[0],u[1]),d.lookAt(0,e,i,a),l.setDistanceLimits(u[0],u[1]),l.lookAt(0,e,i,a),new o({turntable:c,orbit:d,matrix:l},h)};var r=i(152),n=i(380),s=i(762);function o(t,e){this._controllerNames=Object.keys(t),this._controllerList=this._controllerNames.map((function(e){return t[e]})),this._mode=e,this._active=t[e],this._active||(this._mode="turntable",this._active=t.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var a=o.prototype;a.flush=function(t){for(var e=this._controllerList,i=0;i<e.length;++i)e[i].flush(t)},a.idle=function(t){for(var e=this._controllerList,i=0;i<e.length;++i)e[i].idle(t)},a.lookAt=function(t,e,i,r){for(var n=this._controllerList,s=0;s<n.length;++s)n[s].lookAt(t,e,i,r)},a.rotate=function(t,e,i,r){for(var n=this._controllerList,s=0;s<n.length;++s)n[s].rotate(t,e,i,r)},a.pan=function(t,e,i,r){for(var n=this._controllerList,s=0;s<n.length;++s)n[s].pan(t,e,i,r)},a.translate=function(t,e,i,r){for(var n=this._controllerList,s=0;s<n.length;++s)n[s].translate(t,e,i,r)},a.setMatrix=function(t,e){for(var i=this._controllerList,r=0;r<i.length;++r)i[r].setMatrix(t,e)},a.setDistanceLimits=function(t,e){for(var i=this._controllerList,r=0;r<i.length;++r)i[r].setDistanceLimits(t,e)},a.setDistance=function(t,e){for(var i=this._controllerList,r=0;r<i.length;++r)i[r].setDistance(t,e)},a.recalcMatrix=function(t){this._active.recalcMatrix(t)},a.getDistance=function(t){return this._active.getDistance(t)},a.getDistanceLimits=function(t){return this._active.getDistanceLimits(t)},a.lastT=function(){return this._active.lastT()},a.setMode=function(t){if(t!==this._mode){var e=this._controllerNames.indexOf(t);if(!(e<0)){var i=this._active,r=this._controllerList[e],n=Math.max(i.lastT(),r.lastT());i.recalcMatrix(n),r.setMatrix(n,i.computedMatrix),this._active=r,this._mode=t,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},a.getMode=function(){return this._mode}},629:t=>{"use strict";function e(t,e,i,r,n){for(var s=n+1;r<=n;){var o=r+n>>>1,a=t[o];(void 0!==i?i(a,e):a-e)>=0?(s=o,n=o-1):r=o+1}return s}function i(t,e,i,r,n){for(var s=n+1;r<=n;){var o=r+n>>>1,a=t[o];(void 0!==i?i(a,e):a-e)>0?(s=o,n=o-1):r=o+1}return s}function r(t,e,i,r,n){for(var s=r-1;r<=n;){var o=r+n>>>1,a=t[o];(void 0!==i?i(a,e):a-e)<0?(s=o,r=o+1):n=o-1}return s}function n(t,e,i,r,n){for(var s=r-1;r<=n;){var o=r+n>>>1,a=t[o];(void 0!==i?i(a,e):a-e)<=0?(s=o,r=o+1):n=o-1}return s}function s(t,e,i,r,n){for(;r<=n;){var s=r+n>>>1,o=t[s],a=void 0!==i?i(o,e):o-e;if(0===a)return s;a<=0?r=s+1:n=s-1}return-1}function o(t,e,i,r,n,s){return"function"==typeof i?s(t,e,i,void 0===r?0:0|r,void 0===n?t.length-1:0|n):s(t,e,void 0,void 0===i?0:0|i,void 0===r?t.length-1:0|r)}t.exports={ge:function(t,i,r,n,s){return o(t,i,r,n,s,e)},gt:function(t,e,r,n,s){return o(t,e,r,n,s,i)},lt:function(t,e,i,n,s){return o(t,e,i,n,s,r)},le:function(t,e,i,r,s){return o(t,e,i,r,s,n)},eq:function(t,e,i,r,n){return o(t,e,i,r,n,s)}}},40:t=>{"use strict";t.exports=function(t,e,i,r,n,s){var o=n-1,a=n*n,u=o*o,h=(1+2*n)*u,c=n*u,d=a*(3-2*n),l=a*o;if(t.length){s||(s=new Array(t.length));for(var f=t.length-1;f>=0;--f)s[f]=h*t[f]+c*e[f]+d*i[f]+l*r[f];return s}return h*t+c*e+d*i+l*r},t.exports.derivative=function(t,e,i,r,n,s){var o=6*n*n-6*n,a=3*n*n-4*n+1,u=-6*n*n+6*n,h=3*n*n-2*n;if(t.length){s||(s=new Array(t.length));for(var c=t.length-1;c>=0;--c)s[c]=o*t[c]+a*e[c]+u*i[c]+h*r[c];return s}return o*t+a*e+u*i[c]+h*r}},720:(t,e,i)=>{"use strict";t.exports=function(t,e,i){switch(arguments.length){case 0:return new o([0],[0],0);case 1:return"number"==typeof t?new o(r=u(t),r,0):new o(t,u(t.length),0);case 2:var r;if("number"==typeof e)return new o(t,r=u(t.length),+e);i=0;case 3:if(t.length!==e.length)throw new Error("state and velocity lengths must match");return new o(t,e,i)}};var r=i(40),n=i(629);function s(t,e,i){return Math.min(e,Math.max(t,i))}function o(t,e,i){this.dimension=t.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var r=0;r<this.dimension;++r)this.bounds[0][r]=-1/0,this.bounds[1][r]=1/0;this._state=t.slice().reverse(),this._velocity=e.slice().reverse(),this._time=[i],this._scratch=[t.slice(),t.slice(),t.slice(),t.slice(),t.slice()]}var a=o.prototype;function u(t){for(var e=new Array(t),i=0;i<t;++i)e[i]=0;return e}a.flush=function(t){var e=n.gt(this._time,t)-1;e<=0||(this._time.splice(0,e),this._state.splice(0,e*this.dimension),this._velocity.splice(0,e*this.dimension))},a.curve=function(t){var e=this._time,i=e.length,o=n.le(e,t),a=this._scratch[0],u=this._state,h=this._velocity,c=this.dimension,d=this.bounds;if(o<0)for(var l=c-1,f=0;f<c;++f,--l)a[f]=u[l];else if(o>=i-1){l=u.length-1;var p=t-e[i-1];for(f=0;f<c;++f,--l)a[f]=u[l]+p*h[l]}else{l=c*(o+1)-1;var v=e[o],m=e[o+1]-v||1,M=this._scratch[1],g=this._scratch[2],x=this._scratch[3],w=this._scratch[4],y=!0;for(f=0;f<c;++f,--l)M[f]=u[l],x[f]=h[l]*m,g[f]=u[l+c],w[f]=h[l+c]*m,y=y&&M[f]===g[f]&&x[f]===w[f]&&0===x[f];if(y)for(f=0;f<c;++f)a[f]=M[f];else r(M,x,g,w,(t-v)/m,a)}var _=d[0],b=d[1];for(f=0;f<c;++f)a[f]=s(_[f],b[f],a[f]);return a},a.dcurve=function(t){var e=this._time,i=e.length,s=n.le(e,t),o=this._scratch[0],a=this._state,u=this._velocity,h=this.dimension;if(s>=i-1)for(var c=a.length-1,d=(e[i-1],0);d<h;++d,--c)o[d]=u[c];else{c=h*(s+1)-1;var l=e[s],f=e[s+1]-l||1,p=this._scratch[1],v=this._scratch[2],m=this._scratch[3],M=this._scratch[4],g=!0;for(d=0;d<h;++d,--c)p[d]=a[c],m[d]=u[c]*f,v[d]=a[c+h],M[d]=u[c+h]*f,g=g&&p[d]===v[d]&&m[d]===M[d]&&0===m[d];if(g)for(d=0;d<h;++d)o[d]=0;else for(r.derivative(p,m,v,M,(t-l)/f,o),d=0;d<h;++d)o[d]/=f}return o},a.lastT=function(){var t=this._time;return t[t.length-1]},a.stable=function(){for(var t=this._velocity,e=t.length,i=this.dimension-1;i>=0;--i)if(t[--e])return!1;return!0},a.jump=function(t){var e=this.lastT(),i=this.dimension;if(!(t<e||arguments.length!==i+1)){var r=this._state,n=this._velocity,o=r.length-this.dimension,a=this.bounds,u=a[0],h=a[1];this._time.push(e,t);for(var c=0;c<2;++c)for(var d=0;d<i;++d)r.push(r[o++]),n.push(0);for(this._time.push(t),d=i;d>0;--d)r.push(s(u[d-1],h[d-1],arguments[d])),n.push(0)}},a.push=function(t){var e=this.lastT(),i=this.dimension;if(!(t<e||arguments.length!==i+1)){var r=this._state,n=this._velocity,o=r.length-this.dimension,a=t-e,u=this.bounds,h=u[0],c=u[1],d=a>1e-6?1/a:0;this._time.push(t);for(var l=i;l>0;--l){var f=s(h[l-1],c[l-1],arguments[l]);r.push(f),n.push((f-r[o++])*d)}}},a.set=function(t){var e=this.dimension;if(!(t<this.lastT()||arguments.length!==e+1)){var i=this._state,r=this._velocity,n=this.bounds,o=n[0],a=n[1];this._time.push(t);for(var u=e;u>0;--u)i.push(s(o[u-1],a[u-1],arguments[u])),r.push(0)}},a.move=function(t){var e=this.lastT(),i=this.dimension;if(!(t<=e||arguments.length!==i+1)){var r=this._state,n=this._velocity,o=r.length-this.dimension,a=this.bounds,u=a[0],h=a[1],c=t-e,d=c>1e-6?1/c:0;this._time.push(t);for(var l=i;l>0;--l){var f=arguments[l];r.push(s(u[l-1],h[l-1],r[o++]+f)),n.push(f*d)}}},a.idle=function(t){var e=this.lastT();if(!(t<e)){var i=this.dimension,r=this._state,n=this._velocity,o=r.length-i,a=this.bounds,u=a[0],h=a[1],c=t-e;this._time.push(t);for(var d=i-1;d>=0;--d)r.push(s(u[d],h[d],r[o]+c*n[o])),n.push(0),o+=1}}},366:t=>{t.exports=function(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},579:t=>{t.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},304:t=>{t.exports=function(t){var e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],u=t[7],h=t[8],c=t[9],d=t[10],l=t[11],f=t[12],p=t[13],v=t[14],m=t[15];return(e*o-i*s)*(d*m-l*v)-(e*a-r*s)*(c*m-l*p)+(e*u-n*s)*(c*v-d*p)+(i*a-r*o)*(h*m-l*f)-(i*u-n*o)*(h*v-d*f)+(r*u-n*a)*(h*p-c*f)}},444:t=>{t.exports=function(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=i+i,a=r+r,u=n+n,h=i*o,c=r*o,d=r*a,l=n*o,f=n*a,p=n*u,v=s*o,m=s*a,M=s*u;return t[0]=1-d-p,t[1]=c+M,t[2]=l-m,t[3]=0,t[4]=c-M,t[5]=1-h-p,t[6]=f+v,t[7]=0,t[8]=l+m,t[9]=f-v,t[10]=1-h-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},434:t=>{t.exports=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=r+r,u=n+n,h=s+s,c=r*a,d=r*u,l=r*h,f=n*u,p=n*h,v=s*h,m=o*a,M=o*u,g=o*h;return t[0]=1-(f+v),t[1]=d+g,t[2]=l-M,t[3]=0,t[4]=d-g,t[5]=1-(c+v),t[6]=p+m,t[7]=0,t[8]=l+M,t[9]=p-m,t[10]=1-(c+f),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}},949:t=>{t.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},435:t=>{t.exports=function(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],u=e[6],h=e[7],c=e[8],d=e[9],l=e[10],f=e[11],p=e[12],v=e[13],m=e[14],M=e[15],g=i*a-r*o,x=i*u-n*o,w=i*h-s*o,y=r*u-n*a,_=r*h-s*a,b=n*h-s*u,E=c*v-d*p,L=c*m-l*p,T=c*M-f*p,R=d*m-l*v,A=d*M-f*v,P=l*M-f*m,D=g*P-x*A+w*R+y*T-_*L+b*E;return D?(D=1/D,t[0]=(a*P-u*A+h*R)*D,t[1]=(n*A-r*P-s*R)*D,t[2]=(v*b-m*_+M*y)*D,t[3]=(l*_-d*b-f*y)*D,t[4]=(u*T-o*P-h*L)*D,t[5]=(i*P-n*T+s*L)*D,t[6]=(m*w-p*b-M*x)*D,t[7]=(c*b-l*w+f*x)*D,t[8]=(o*A-a*T+h*E)*D,t[9]=(r*T-i*A-s*E)*D,t[10]=(p*_-v*w+M*g)*D,t[11]=(d*w-c*_-f*g)*D,t[12]=(a*L-o*R-u*E)*D,t[13]=(i*R-r*L+n*E)*D,t[14]=(v*x-p*y-m*g)*D,t[15]=(c*y-d*x+l*g)*D,t):null}},329:(t,e,i)=>{var r=i(949);t.exports=function(t,e,i,n){var s,o,a,u,h,c,d,l,f,p,v=e[0],m=e[1],M=e[2],g=n[0],x=n[1],w=n[2],y=i[0],_=i[1],b=i[2];return Math.abs(v-y)<1e-6&&Math.abs(m-_)<1e-6&&Math.abs(M-b)<1e-6?r(t):(d=v-y,l=m-_,f=M-b,s=x*(f*=p=1/Math.sqrt(d*d+l*l+f*f))-w*(l*=p),o=w*(d*=p)-g*f,a=g*l-x*d,(p=Math.sqrt(s*s+o*o+a*a))?(s*=p=1/p,o*=p,a*=p):(s=0,o=0,a=0),u=l*a-f*o,h=f*s-d*a,c=d*o-l*s,(p=Math.sqrt(u*u+h*h+c*c))?(u*=p=1/p,h*=p,c*=p):(u=0,h=0,c=0),t[0]=s,t[1]=u,t[2]=d,t[3]=0,t[4]=o,t[5]=h,t[6]=l,t[7]=0,t[8]=a,t[9]=c,t[10]=f,t[11]=0,t[12]=-(s*v+o*m+a*M),t[13]=-(u*v+h*m+c*M),t[14]=-(d*v+l*m+f*M),t[15]=1,t)}},767:t=>{t.exports=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],u=e[5],h=e[6],c=e[7],d=e[8],l=e[9],f=e[10],p=e[11],v=e[12],m=e[13],M=e[14],g=e[15],x=i[0],w=i[1],y=i[2],_=i[3];return t[0]=x*r+w*a+y*d+_*v,t[1]=x*n+w*u+y*l+_*m,t[2]=x*s+w*h+y*f+_*M,t[3]=x*o+w*c+y*p+_*g,x=i[4],w=i[5],y=i[6],_=i[7],t[4]=x*r+w*a+y*d+_*v,t[5]=x*n+w*u+y*l+_*m,t[6]=x*s+w*h+y*f+_*M,t[7]=x*o+w*c+y*p+_*g,x=i[8],w=i[9],y=i[10],_=i[11],t[8]=x*r+w*a+y*d+_*v,t[9]=x*n+w*u+y*l+_*m,t[10]=x*s+w*h+y*f+_*M,t[11]=x*o+w*c+y*p+_*g,x=i[12],w=i[13],y=i[14],_=i[15],t[12]=x*r+w*a+y*d+_*v,t[13]=x*n+w*u+y*l+_*m,t[14]=x*s+w*h+y*f+_*M,t[15]=x*o+w*c+y*p+_*g,t}},796:t=>{t.exports=function(t,e,i,r){var n,s,o,a,u,h,c,d,l,f,p,v,m,M,g,x,w,y,_,b,E,L,T,R,A=r[0],P=r[1],D=r[2],k=Math.sqrt(A*A+P*P+D*D);return Math.abs(k)<1e-6?null:(A*=k=1/k,P*=k,D*=k,n=Math.sin(i),o=1-(s=Math.cos(i)),a=e[0],u=e[1],h=e[2],c=e[3],d=e[4],l=e[5],f=e[6],p=e[7],v=e[8],m=e[9],M=e[10],g=e[11],x=A*A*o+s,w=P*A*o+D*n,y=D*A*o-P*n,_=A*P*o-D*n,b=P*P*o+s,E=D*P*o+A*n,L=A*D*o+P*n,T=P*D*o-A*n,R=D*D*o+s,t[0]=a*x+d*w+v*y,t[1]=u*x+l*w+m*y,t[2]=h*x+f*w+M*y,t[3]=c*x+p*w+g*y,t[4]=a*_+d*b+v*E,t[5]=u*_+l*b+m*E,t[6]=h*_+f*b+M*E,t[7]=c*_+p*b+g*E,t[8]=a*L+d*T+v*R,t[9]=u*L+l*T+m*R,t[10]=h*L+f*T+M*R,t[11]=c*L+p*T+g*R,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}},678:t=>{t.exports=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),s=e[4],o=e[5],a=e[6],u=e[7],h=e[8],c=e[9],d=e[10],l=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*n+h*r,t[5]=o*n+c*r,t[6]=a*n+d*r,t[7]=u*n+l*r,t[8]=h*n-s*r,t[9]=c*n-o*r,t[10]=d*n-a*r,t[11]=l*n-u*r,t}},330:t=>{t.exports=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],a=e[2],u=e[3],h=e[8],c=e[9],d=e[10],l=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n-h*r,t[1]=o*n-c*r,t[2]=a*n-d*r,t[3]=u*n-l*r,t[8]=s*r+h*n,t[9]=o*r+c*n,t[10]=a*r+d*n,t[11]=u*r+l*n,t}},860:t=>{t.exports=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],a=e[2],u=e[3],h=e[4],c=e[5],d=e[6],l=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n+h*r,t[1]=o*n+c*r,t[2]=a*n+d*r,t[3]=u*n+l*r,t[4]=h*n-s*r,t[5]=c*n-o*r,t[6]=d*n-a*r,t[7]=l*n-u*r,t}},101:t=>{t.exports=function(t,e,i){var r=i[0],n=i[1],s=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},121:t=>{t.exports=function(t,e,i){var r,n,s,o,a,u,h,c,d,l,f,p,v=i[0],m=i[1],M=i[2];return e===t?(t[12]=e[0]*v+e[4]*m+e[8]*M+e[12],t[13]=e[1]*v+e[5]*m+e[9]*M+e[13],t[14]=e[2]*v+e[6]*m+e[10]*M+e[14],t[15]=e[3]*v+e[7]*m+e[11]*M+e[15]):(r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],u=e[5],h=e[6],c=e[7],d=e[8],l=e[9],f=e[10],p=e[11],t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=a,t[5]=u,t[6]=h,t[7]=c,t[8]=d,t[9]=l,t[10]=f,t[11]=p,t[12]=r*v+a*m+d*M+e[12],t[13]=n*v+u*m+l*M+e[13],t[14]=s*v+h*m+f*M+e[14],t[15]=o*v+c*m+p*M+e[15]),t}},900:t=>{t.exports=function(t,e){if(t===e){var i=e[1],r=e[2],n=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=n,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}},398:t=>{t.exports=function(t,e,i,r){var n,s,o,a,u,h=e[0],c=e[1],d=e[2],l=e[3],f=i[0],p=i[1],v=i[2],m=i[3];return(s=h*f+c*p+d*v+l*m)<0&&(s=-s,f=-f,p=-p,v=-v,m=-m),1-s>1e-6?(n=Math.acos(s),o=Math.sin(n),a=Math.sin((1-r)*n)/o,u=Math.sin(r*n)/o):(a=1-r,u=r),t[0]=a*h+u*f,t[1]=a*c+u*p,t[2]=a*d+u*v,t[3]=a*l+u*m,t}},594:t=>{t.exports=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],u=i[2];return t[0]=n*u-s*a,t[1]=s*o-r*u,t[2]=r*a-n*o,t}},409:t=>{t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}},136:t=>{t.exports=function(t){var e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)}},229:t=>{t.exports=function(t,e,i,r){var n=e[0],s=e[1],o=e[2];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=o+r*(i[2]-o),t}},785:t=>{t.exports=function(t,e){var i=e[0],r=e[1],n=e[2],s=i*i+r*r+n*n;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t}},887:(t,e,i)=>{"use strict";var r=i(705);t.exports=r&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}()},705:t=>{t.exports=!0},79:(t,e,i)=>{var r=i(332),n=i(579),s=i(366),o=i(304),a=i(435),u=i(900),h={length:i(136),normalize:i(785),dot:i(409),cross:i(594)},c=n(),d=n(),l=[0,0,0,0],f=[[0,0,0],[0,0,0],[0,0,0]],p=[0,0,0];function v(t,e,i,r,n){t[0]=e[0]*r+i[0]*n,t[1]=e[1]*r+i[1]*n,t[2]=e[2]*r+i[2]*n}t.exports=function(t,e,i,n,m,M){if(e||(e=[0,0,0]),i||(i=[0,0,0]),n||(n=[0,0,0]),m||(m=[0,0,0,1]),M||(M=[0,0,0,1]),!r(c,t))return!1;if(s(d,c),d[3]=0,d[7]=0,d[11]=0,d[15]=1,Math.abs(o(d)<1e-8))return!1;var g,x,w,y,_,b,E,L=c[3],T=c[7],R=c[11],A=c[12],P=c[13],D=c[14],k=c[15];if(0!==L||0!==T||0!==R){if(l[0]=L,l[1]=T,l[2]=R,l[3]=k,!a(d,d))return!1;u(d,d),g=m,w=d,y=(x=l)[0],_=x[1],b=x[2],E=x[3],g[0]=w[0]*y+w[4]*_+w[8]*b+w[12]*E,g[1]=w[1]*y+w[5]*_+w[9]*b+w[13]*E,g[2]=w[2]*y+w[6]*_+w[10]*b+w[14]*E,g[3]=w[3]*y+w[7]*_+w[11]*b+w[15]*E}else m[0]=m[1]=m[2]=0,m[3]=1;if(e[0]=A,e[1]=P,e[2]=D,function(t,e){t[0][0]=e[0],t[0][1]=e[1],t[0][2]=e[2],t[1][0]=e[4],t[1][1]=e[5],t[1][2]=e[6],t[2][0]=e[8],t[2][1]=e[9],t[2][2]=e[10]}(f,c),i[0]=h.length(f[0]),h.normalize(f[0],f[0]),n[0]=h.dot(f[0],f[1]),v(f[1],f[1],f[0],1,-n[0]),i[1]=h.length(f[1]),h.normalize(f[1],f[1]),n[0]/=i[1],n[1]=h.dot(f[0],f[2]),v(f[2],f[2],f[0],1,-n[1]),n[2]=h.dot(f[1],f[2]),v(f[2],f[2],f[1],1,-n[2]),i[2]=h.length(f[2]),h.normalize(f[2],f[2]),n[1]/=i[2],n[2]/=i[2],h.cross(p,f[1],f[2]),h.dot(f[0],p)<0)for(var U=0;U<3;U++)i[U]*=-1,f[U][0]*=-1,f[U][1]*=-1,f[U][2]*=-1;return M[0]=.5*Math.sqrt(Math.max(1+f[0][0]-f[1][1]-f[2][2],0)),M[1]=.5*Math.sqrt(Math.max(1-f[0][0]+f[1][1]-f[2][2],0)),M[2]=.5*Math.sqrt(Math.max(1-f[0][0]-f[1][1]+f[2][2],0)),M[3]=.5*Math.sqrt(Math.max(1+f[0][0]+f[1][1]+f[2][2],0)),f[2][1]>f[1][2]&&(M[0]=-M[0]),f[0][2]>f[2][0]&&(M[1]=-M[1]),f[1][0]>f[0][1]&&(M[2]=-M[2]),!0}},332:t=>{t.exports=function(t,e){var i=e[15];if(0===i)return!1;for(var r=1/i,n=0;n<16;n++)t[n]=e[n]*r;return!0}},89:(t,e,i)=>{var r=i(229),n=i(153),s=i(79),o=i(304),a=i(807),u=d(),h=d(),c=d();function d(){return{translate:l(),scale:l(1),skew:l(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function l(t){return[t||0,t||0,t||0]}t.exports=function(t,e,i,d){if(0===o(e)||0===o(i))return!1;var l=s(e,u.translate,u.scale,u.skew,u.perspective,u.quaternion),f=s(i,h.translate,h.scale,h.skew,h.perspective,h.quaternion);return!(!l||!f||(r(c.translate,u.translate,h.translate,d),r(c.skew,u.skew,h.skew,d),r(c.scale,u.scale,h.scale,d),r(c.perspective,u.perspective,h.perspective,d),a(c.quaternion,u.quaternion,h.quaternion,d),n(t,c.translate,c.scale,c.skew,c.perspective,c.quaternion),0))}},153:(t,e,i)=>{var r={identity:i(949),translate:i(121),multiply:i(767),create:i(579),scale:i(101),fromRotationTranslation:i(434)},n=(r.create(),r.create());t.exports=function(t,e,i,s,o,a){return r.identity(t),r.fromRotationTranslation(t,a,e),t[3]=o[0],t[7]=o[1],t[11]=o[2],t[15]=o[3],r.identity(n),0!==s[2]&&(n[9]=s[2],r.multiply(t,t,n)),0!==s[1]&&(n[9]=0,n[8]=s[1],r.multiply(t,t,n)),0!==s[0]&&(n[8]=0,n[4]=s[0],r.multiply(t,t,n)),r.scale(t,t,i),t}},762:(t,e,i)=>{"use strict";var r=i(629),n=i(89),s=i(435),o=i(678),a=i(330),u=i(860),h=i(329),c=i(121),d=(i(101),i(785)),l=[0,0,0];function f(t){this._components=t.slice(),this._time=[0],this.prevMatrix=t.slice(),this.nextMatrix=t.slice(),this.computedMatrix=t.slice(),this.computedInverse=t.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}t.exports=function(t){return new f((t=t||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var p=f.prototype;p.recalcMatrix=function(t){var e=this._time,i=r.le(e,t),o=this.computedMatrix;if(!(i<0)){var a=this._components;if(i===e.length-1)for(var u=16*i,h=0;h<16;++h)o[h]=a[u++];else{var c=e[i+1]-e[i],l=(u=16*i,this.prevMatrix),f=!0;for(h=0;h<16;++h)l[h]=a[u++];var p=this.nextMatrix;for(h=0;h<16;++h)p[h]=a[u++],f=f&&l[h]===p[h];if(c<1e-6||f)for(h=0;h<16;++h)o[h]=l[h];else n(o,l,p,(t-e[i])/c)}var v=this.computedUp;v[0]=o[1],v[1]=o[5],v[2]=o[9],d(v,v);var m=this.computedInverse;s(m,o);var M=this.computedEye,g=m[15];M[0]=m[12]/g,M[1]=m[13]/g,M[2]=m[14]/g;var x=this.computedCenter,w=Math.exp(this.computedRadius[0]);for(h=0;h<3;++h)x[h]=M[h]-o[2+4*h]*w}},p.idle=function(t){if(!(t<this.lastT())){for(var e=this._components,i=e.length-16,r=0;r<16;++r)e.push(e[i++]);this._time.push(t)}},p.flush=function(t){var e=r.gt(this._time,t)-2;e<0||(this._time.splice(0,e),this._components.splice(0,16*e))},p.lastT=function(){return this._time[this._time.length-1]},p.lookAt=function(t,e,i,r){this.recalcMatrix(t),e=e||this.computedEye,i=i||l,r=r||this.computedUp,this.setMatrix(t,h(this.computedMatrix,e,i,r));for(var n=0,s=0;s<3;++s)n+=Math.pow(i[s]-e[s],2);n=Math.log(Math.sqrt(n)),this.computedRadius[0]=n},p.rotate=function(t,e,i,r){this.recalcMatrix(t);var n=this.computedInverse;e&&a(n,n,e),i&&o(n,n,i),r&&u(n,n,r),this.setMatrix(t,s(this.computedMatrix,n))};var v=[0,0,0];p.pan=function(t,e,i,r){v[0]=-(e||0),v[1]=-(i||0),v[2]=-(r||0),this.recalcMatrix(t);var n=this.computedInverse;c(n,n,v),this.setMatrix(t,s(n,n))},p.translate=function(t,e,i,r){v[0]=e||0,v[1]=i||0,v[2]=r||0,this.recalcMatrix(t);var n=this.computedMatrix;c(n,n,v),this.setMatrix(t,n)},p.setMatrix=function(t,e){if(!(t<this.lastT())){this._time.push(t);for(var i=0;i<16;++i)this._components.push(e[i])}},p.setDistance=function(t,e){this.computedRadius[0]=e},p.setDistanceLimits=function(t,e){var i=this._limits;i[0]=t,i[1]=e},p.getDistanceLimits=function(t){var e=this._limits;return t?(t[0]=e[0],t[1]=e[1],t):e}},702:(t,e,i)=>{"use strict";t.exports=function(t,e){e||(e=t,t=window);var i=0,n=0,s=0,o={shift:!1,alt:!1,control:!1,meta:!1},a=!1;function u(t){var e=!1;return"altKey"in t&&(e=e||t.altKey!==o.alt,o.alt=!!t.altKey),"shiftKey"in t&&(e=e||t.shiftKey!==o.shift,o.shift=!!t.shiftKey),"ctrlKey"in t&&(e=e||t.ctrlKey!==o.control,o.control=!!t.ctrlKey),"metaKey"in t&&(e=e||t.metaKey!==o.meta,o.meta=!!t.metaKey),e}function h(t,a){var h=r.x(a),c=r.y(a);"buttons"in a&&(t=0|a.buttons),(t!==i||h!==n||c!==s||u(a))&&(i=0|t,n=h||0,s=c||0,e&&e(i,n,s,o))}function c(t){h(0,t)}function d(){(i||n||s||o.shift||o.alt||o.meta||o.control)&&(n=s=0,i=0,o.shift=o.alt=o.control=o.meta=!1,e&&e(0,0,0,o))}function l(t){u(t)&&e&&e(i,n,s,o)}function f(t){0===r.buttons(t)?h(0,t):h(i,t)}function p(t){h(i|r.buttons(t),t)}function v(t){h(i&~r.buttons(t),t)}function m(){a||(a=!0,t.addEventListener("mousemove",f),t.addEventListener("mousedown",p),t.addEventListener("mouseup",v),t.addEventListener("mouseleave",c),t.addEventListener("mouseenter",c),t.addEventListener("mouseout",c),t.addEventListener("mouseover",c),t.addEventListener("blur",d),t.addEventListener("keyup",l),t.addEventListener("keydown",l),t.addEventListener("keypress",l),t!==window&&(window.addEventListener("blur",d),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}m();var M={element:t};return Object.defineProperties(M,{enabled:{get:function(){return a},set:function(e){e?m():a&&(a=!1,t.removeEventListener("mousemove",f),t.removeEventListener("mousedown",p),t.removeEventListener("mouseup",v),t.removeEventListener("mouseleave",c),t.removeEventListener("mouseenter",c),t.removeEventListener("mouseout",c),t.removeEventListener("mouseover",c),t.removeEventListener("blur",d),t.removeEventListener("keyup",l),t.removeEventListener("keydown",l),t.removeEventListener("keypress",l),t!==window&&(window.removeEventListener("blur",d),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))},enumerable:!0},buttons:{get:function(){return i},enumerable:!0},x:{get:function(){return n},enumerable:!0},y:{get:function(){return s},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),M};var r=i(986)},715:t=>{var e={left:0,top:0};t.exports=function(t,i,r){i=i||t.currentTarget||t.srcElement,Array.isArray(r)||(r=[0,0]);var n,s=t.clientX||0,o=t.clientY||0,a=(n=i)===window||n===document||n===document.body?e:n.getBoundingClientRect();return r[0]=s-a.left,r[1]=o-a.top,r}},986:(t,e)=>{"use strict";function i(t){return t.target||t.srcElement||window}e.buttons=function(t){if("object"==typeof t){if("buttons"in t)return t.buttons;if("which"in t){if(2===(e=t.which))return 4;if(3===e)return 2;if(e>0)return 1<<e-1}else if("button"in t){var e;if(1===(e=t.button))return 4;if(2===e)return 2;if(e>=0)return 1<<e}}return 0},e.element=i,e.x=function(t){if("object"==typeof t){if("offsetX"in t)return t.offsetX;var e=i(t).getBoundingClientRect();return t.clientX-e.left}return 0},e.y=function(t){if("object"==typeof t){if("offsetY"in t)return t.offsetY;var e=i(t).getBoundingClientRect();return t.clientY-e.top}return 0}},81:(t,e,i)=>{"use strict";var r=i(75);t.exports=function(t,e,i){"function"==typeof t&&(i=!!e,e=t,t=window);var n=r("ex",t),s=function(t){i&&t.preventDefault();var r=t.deltaX||0,s=t.deltaY||0,o=t.deltaZ||0,a=1;switch(t.deltaMode){case 1:a=n;break;case 2:a=window.innerHeight}if(s*=a,o*=a,(r*=a)||s||o)return e(r,s,o,t)};return t.addEventListener("wheel",s),s}},292:t=>{"use strict";t.exports=function(t,e,i,r,n,s,o,a,u,h){var c=e+s+h;if(d>0){var d=Math.sqrt(c+1);t[0]=.5*(o-u)/d,t[1]=.5*(a-r)/d,t[2]=.5*(i-s)/d,t[3]=.5*d}else{var l=Math.max(e,s,h);d=Math.sqrt(2*l-c+1),e>=l?(t[0]=.5*d,t[1]=.5*(n+i)/d,t[2]=.5*(a+r)/d,t[3]=.5*(o-u)/d):s>=l?(t[0]=.5*(i+n)/d,t[1]=.5*d,t[2]=.5*(u+o)/d,t[3]=.5*(a-r)/d):(t[0]=.5*(r+a)/d,t[1]=.5*(o+u)/d,t[2]=.5*d,t[3]=.5*(i-n)/d)}return t}},380:(t,e,i)=>{"use strict";t.exports=function(t){var e=(t=t||{}).center||[0,0,0],i=t.rotation||[0,0,0,1],r=t.radius||1;e=[].slice.call(e,0,3),c(i=[].slice.call(i,0,4),i);var n=new d(i,e,Math.log(r));return n.setDistanceLimits(t.zoomMin,t.zoomMax),("eye"in t||"up"in t)&&n.lookAt(0,t.eye,t.center,t.up),n};var r=i(720),n=i(329),s=i(444),o=i(435),a=i(292);function u(t,e,i){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(i,2))}function h(t,e,i,r){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(i,2)+Math.pow(r,2))}function c(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=h(i,r,n,s);o>1e-6?(t[0]=i/o,t[1]=r/o,t[2]=n/o,t[3]=s/o):(t[0]=t[1]=t[2]=0,t[3]=1)}function d(t,e,i){this.radius=r([i]),this.center=r(e),this.rotation=r(t),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var l=d.prototype;l.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},l.recalcMatrix=function(t){this.radius.curve(t),this.center.curve(t),this.rotation.curve(t);var e=this.computedRotation;c(e,e);var i=this.computedMatrix;s(i,e);var r=this.computedCenter,n=this.computedEye,o=this.computedUp,a=Math.exp(this.computedRadius[0]);n[0]=r[0]+a*i[2],n[1]=r[1]+a*i[6],n[2]=r[2]+a*i[10],o[0]=i[1],o[1]=i[5],o[2]=i[9];for(var u=0;u<3;++u){for(var h=0,d=0;d<3;++d)h+=i[u+4*d]*n[d];i[12+u]=-h}},l.getMatrix=function(t,e){this.recalcMatrix(t);var i=this.computedMatrix;if(e){for(var r=0;r<16;++r)e[r]=i[r];return e}return i},l.idle=function(t){this.center.idle(t),this.radius.idle(t),this.rotation.idle(t)},l.flush=function(t){this.center.flush(t),this.radius.flush(t),this.rotation.flush(t)},l.pan=function(t,e,i,r){e=e||0,i=i||0,r=r||0,this.recalcMatrix(t);var n=this.computedMatrix,s=n[1],o=n[5],a=n[9],h=u(s,o,a);s/=h,o/=h,a/=h;var c=n[0],d=n[4],l=n[8],f=c*s+d*o+l*a,p=u(c-=s*f,d-=o*f,l-=a*f);c/=p,d/=p,l/=p;var v=n[2],m=n[6],M=n[10],g=v*s+m*o+M*a,x=v*c+m*d+M*l,w=u(v-=g*s+x*c,m-=g*o+x*d,M-=g*a+x*l);v/=w,m/=w,M/=w;var y=c*e+s*i,_=d*e+o*i,b=l*e+a*i;this.center.move(t,y,_,b);var E=Math.exp(this.computedRadius[0]);E=Math.max(1e-4,E+r),this.radius.set(t,Math.log(E))},l.rotate=function(t,e,i,r){this.recalcMatrix(t),e=e||0,i=i||0;var n=this.computedMatrix,s=n[0],o=n[4],a=n[8],c=n[1],d=n[5],l=n[9],f=n[2],p=n[6],v=n[10],m=e*s+i*c,M=e*o+i*d,g=e*a+i*l,x=-(p*g-v*M),w=-(v*m-f*g),y=-(f*M-p*m),_=Math.sqrt(Math.max(0,1-Math.pow(x,2)-Math.pow(w,2)-Math.pow(y,2))),b=h(x,w,y,_);b>1e-6?(x/=b,w/=b,y/=b,_/=b):(x=w=y=0,_=1);var E=this.computedRotation,L=E[0],T=E[1],R=E[2],A=E[3],P=L*_+A*x+T*y-R*w,D=T*_+A*w+R*x-L*y,k=R*_+A*y+L*w-T*x,U=A*_-L*x-T*w-R*y;if(r){x=f,w=p,y=v;var C=Math.sin(r)/u(x,w,y);x*=C,w*=C,y*=C,U=U*(_=Math.cos(e))-(P=P*_+U*x+D*y-k*w)*x-(D=D*_+U*w+k*x-P*y)*w-(k=k*_+U*y+P*w-D*x)*y}var I=h(P,D,k,U);I>1e-6?(P/=I,D/=I,k/=I,U/=I):(P=D=k=0,U=1),this.rotation.set(t,P,D,k,U)},l.lookAt=function(t,e,i,r){this.recalcMatrix(t),i=i||this.computedCenter,e=e||this.computedEye,r=r||this.computedUp;var s=this.computedMatrix;n(s,e,i,r);var o=this.computedRotation;a(o,s[0],s[1],s[2],s[4],s[5],s[6],s[8],s[9],s[10]),c(o,o),this.rotation.set(t,o[0],o[1],o[2],o[3]);for(var u=0,h=0;h<3;++h)u+=Math.pow(i[h]-e[h],2);this.radius.set(t,.5*Math.log(Math.max(u,1e-6))),this.center.set(t,i[0],i[1],i[2])},l.translate=function(t,e,i,r){this.center.move(t,e||0,i||0,r||0)},l.setMatrix=function(t,e){var i=this.computedRotation;a(i,e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]),c(i,i),this.rotation.set(t,i[0],i[1],i[2],i[3]);var r=this.computedMatrix;o(r,e);var n=r[15];if(Math.abs(n)>1e-6){var s=r[12]/n,u=r[13]/n,h=r[14]/n;this.recalcMatrix(t);var d=Math.exp(this.computedRadius[0]);this.center.set(t,s-r[2]*d,u-r[6]*d,h-r[10]*d),this.radius.idle(t)}else this.center.idle(t),this.radius.idle(t)},l.setDistance=function(t,e){e>0&&this.radius.set(t,Math.log(e))},l.setDistanceLimits=function(t,e){t=t>0?Math.log(t):-1/0,e=e>0?Math.log(e):1/0,e=Math.max(e,t),this.radius.bounds[0][0]=t,this.radius.bounds[1][0]=e},l.getDistanceLimits=function(t){var e=this.radius.bounds;return t?(t[0]=Math.exp(e[0][0]),t[1]=Math.exp(e[1][0]),t):[Math.exp(e[0][0]),Math.exp(e[1][0])]},l.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},l.fromJSON=function(t){var e=this.lastT(),i=t.center;i&&this.center.set(e,i[0],i[1],i[2]);var r=t.rotation;r&&this.rotation.set(e,r[0],r[1],r[2],r[3]);var n=t.distance;n&&n>0&&this.radius.set(e,Math.log(n)),this.setDistanceLimits(t.zoomMin,t.zoomMax)}},369:t=>{t.exports=function(t,e){e||(e=[0,""]),t=String(t);var i=parseFloat(t,10);return e[0]=i,e[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},807:(t,e,i)=>{t.exports=i(398)},716:(t,e,i)=>{t.exports=i.g.performance&&i.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},75:(t,e,i)=>{"use strict";var r=i(369);t.exports=a;var n=o("in",document.body);function s(t,e){var i=r(getComputedStyle(t).getPropertyValue(e));return i[0]*a(i[1],t)}function o(t,e){var i=document.createElement("div");i.style.height="128"+t,e.appendChild(i);var r=s(i,"height")/128;return e.removeChild(i),r}function a(t,e){if(!t)return null;switch(e=e||document.body,t=(t+""||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),t){case"%":return e.clientHeight/100;case"ch":case"ex":return o(t,e);case"em":return s(e,"font-size");case"rem":return s(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return n;case"cm":return n/2.54;case"mm":return n/25.4;case"pt":return n/72;case"pc":return n/6;case"px":return 1}var i=r(t);if(!isNaN(i[0])&&i[1]){var u=a(i[1],e);return"number"==typeof u?i[0]*u:null}return null}},152:(t,e,i)=>{"use strict";t.exports=function(t){var e=(t=t||{}).center||[0,0,0],i=t.up||[0,1,0],r=t.right||d(i),n=t.radius||1,s=t.theta||0,c=t.phi||0;if(e=[].slice.call(e,0,3),i=[].slice.call(i,0,3),a(i,i),r=[].slice.call(r,0,3),a(r,r),"eye"in t){var f=t.eye,p=[f[0]-e[0],f[1]-e[1],f[2]-e[2]];o(r,p,i),h(r[0],r[1],r[2])<1e-6?r=d(i):a(r,r),n=h(p[0],p[1],p[2]);var v=u(i,p)/n,m=u(r,p)/n;c=Math.acos(v),s=Math.acos(m)}return n=Math.log(n),new l(t.zoomMin,t.zoomMax,e,i,r,n,s,c)};var r=i(720),n=i(435),s=i(796),o=i(594),a=i(785),u=i(409);function h(t,e,i){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(i,2))}function c(t){return Math.min(1,Math.max(-1,t))}function d(t){var e=Math.abs(t[0]),i=Math.abs(t[1]),r=Math.abs(t[2]),n=[0,0,0];e>Math.max(i,r)?n[2]=1:i>Math.max(e,r)?n[0]=1:n[1]=1;for(var s=0,o=0,u=0;u<3;++u)s+=t[u]*t[u],o+=n[u]*t[u];for(u=0;u<3;++u)n[u]-=o/s*t[u];return a(n,n),n}function l(t,e,i,n,s,o,a,u){this.center=r(i),this.up=r(n),this.right=r(s),this.radius=r([o]),this.angle=r([a,u]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(t,e),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var h=0;h<16;++h)this.computedMatrix[h]=.5;this.recalcMatrix(0)}var f=l.prototype;f.setDistanceLimits=function(t,e){t=t>0?Math.log(t):-1/0,e=e>0?Math.log(e):1/0,e=Math.max(e,t),this.radius.bounds[0][0]=t,this.radius.bounds[1][0]=e},f.getDistanceLimits=function(t){var e=this.radius.bounds[0];return t?(t[0]=Math.exp(e[0][0]),t[1]=Math.exp(e[1][0]),t):[Math.exp(e[0][0]),Math.exp(e[1][0])]},f.recalcMatrix=function(t){this.center.curve(t),this.up.curve(t),this.right.curve(t),this.radius.curve(t),this.angle.curve(t);for(var e=this.computedUp,i=this.computedRight,r=0,n=0,s=0;s<3;++s)n+=e[s]*i[s],r+=e[s]*e[s];var u=Math.sqrt(r),c=0;for(s=0;s<3;++s)i[s]-=e[s]*n/r,c+=i[s]*i[s],e[s]/=u;var d=Math.sqrt(c);for(s=0;s<3;++s)i[s]/=d;var l=this.computedToward;o(l,e,i),a(l,l);var f=Math.exp(this.computedRadius[0]),p=this.computedAngle[0],v=this.computedAngle[1],m=Math.cos(p),M=Math.sin(p),g=Math.cos(v),x=Math.sin(v),w=this.computedCenter,y=m*g,_=M*g,b=x,E=-m*x,L=-M*x,T=g,R=this.computedEye,A=this.computedMatrix;for(s=0;s<3;++s){var P=y*i[s]+_*l[s]+b*e[s];A[4*s+1]=E*i[s]+L*l[s]+T*e[s],A[4*s+2]=P,A[4*s+3]=0}var D=A[1],k=A[5],U=A[9],C=A[2],I=A[6],S=A[10],B=k*S-U*I,q=U*C-D*S,F=D*I-k*C,z=h(B,q,F);for(B/=z,q/=z,F/=z,A[0]=B,A[4]=q,A[8]=F,s=0;s<3;++s)R[s]=w[s]+A[2+4*s]*f;for(s=0;s<3;++s){c=0;for(var H=0;H<3;++H)c+=A[s+4*H]*R[H];A[12+s]=-c}A[15]=1},f.getMatrix=function(t,e){this.recalcMatrix(t);var i=this.computedMatrix;if(e){for(var r=0;r<16;++r)e[r]=i[r];return e}return i};var p=[0,0,0];f.rotate=function(t,e,i,r){if(this.angle.move(t,e,i),r){this.recalcMatrix(t);var n=this.computedMatrix;p[0]=n[2],p[1]=n[6],p[2]=n[10];for(var o=this.computedUp,a=this.computedRight,u=this.computedToward,h=0;h<3;++h)n[4*h]=o[h],n[4*h+1]=a[h],n[4*h+2]=u[h];for(s(n,n,r,p),h=0;h<3;++h)o[h]=n[4*h],a[h]=n[4*h+1];this.up.set(t,o[0],o[1],o[2]),this.right.set(t,a[0],a[1],a[2])}},f.pan=function(t,e,i,r){e=e||0,i=i||0,r=r||0,this.recalcMatrix(t);var n=this.computedMatrix,s=(Math.exp(this.computedRadius[0]),n[1]),o=n[5],a=n[9],u=h(s,o,a);s/=u,o/=u,a/=u;var c=n[0],d=n[4],l=n[8],f=c*s+d*o+l*a,p=h(c-=s*f,d-=o*f,l-=a*f),v=(c/=p)*e+s*i,m=(d/=p)*e+o*i,M=(l/=p)*e+a*i;this.center.move(t,v,m,M);var g=Math.exp(this.computedRadius[0]);g=Math.max(1e-4,g+r),this.radius.set(t,Math.log(g))},f.translate=function(t,e,i,r){this.center.move(t,e||0,i||0,r||0)},f.setMatrix=function(t,e,i,r){var s=1;"number"==typeof i&&(s=0|i),(s<0||s>3)&&(s=1);var o=(s+2)%3;e||(this.recalcMatrix(t),e=this.computedMatrix);var a=e[s],u=e[s+4],d=e[s+8];if(r){var l=Math.abs(a),f=Math.abs(u),p=Math.abs(d),v=Math.max(l,f,p);l===v?(a=a<0?-1:1,u=d=0):p===v?(d=d<0?-1:1,a=u=0):(u=u<0?-1:1,a=d=0)}else{var m=h(a,u,d);a/=m,u/=m,d/=m}var M,g,x=e[o],w=e[o+4],y=e[o+8],_=x*a+w*u+y*d,b=h(x-=a*_,w-=u*_,y-=d*_),E=u*(y/=b)-d*(w/=b),L=d*(x/=b)-a*y,T=a*w-u*x,R=h(E,L,T);if(E/=R,L/=R,T/=R,this.center.jump(t,Y,K,O),this.radius.idle(t),this.up.jump(t,a,u,d),this.right.jump(t,x,w,y),2===s){var A=e[1],P=e[5],D=e[9],k=A*x+P*w+D*y,U=A*E+P*L+D*T;M=B<0?-Math.PI/2:Math.PI/2,g=Math.atan2(U,k)}else{var C=e[2],I=e[6],S=e[10],B=C*a+I*u+S*d,q=C*x+I*w+S*y,F=C*E+I*L+S*T;M=Math.asin(c(B)),g=Math.atan2(F,q)}this.angle.jump(t,g,M),this.recalcMatrix(t);var z=e[2],H=e[6],j=e[10],N=this.computedMatrix;n(N,e);var W=N[15],Y=N[12]/W,K=N[13]/W,O=N[14]/W,X=Math.exp(this.computedRadius[0]);this.center.jump(t,Y-z*X,K-H*X,O-j*X)},f.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},f.idle=function(t){this.center.idle(t),this.up.idle(t),this.right.idle(t),this.radius.idle(t),this.angle.idle(t)},f.flush=function(t){this.center.flush(t),this.up.flush(t),this.right.flush(t),this.radius.flush(t),this.angle.flush(t)},f.setDistance=function(t,e){e>0&&this.radius.set(t,Math.log(e))},f.lookAt=function(t,e,i,r){this.recalcMatrix(t),e=e||this.computedEye,i=i||this.computedCenter;var n=(r=r||this.computedUp)[0],s=r[1],o=r[2],a=h(n,s,o);if(!(a<1e-6)){n/=a,s/=a,o/=a;var u=e[0]-i[0],d=e[1]-i[1],l=e[2]-i[2],f=h(u,d,l);if(!(f<1e-6)){u/=f,d/=f,l/=f;var p=this.computedRight,v=p[0],m=p[1],M=p[2],g=n*v+s*m+o*M,x=h(v-=g*n,m-=g*s,M-=g*o);if(!(x<.01&&(x=h(v=s*l-o*d,m=o*u-n*l,M=n*d-s*u))<1e-6)){v/=x,m/=x,M/=x,this.up.set(t,n,s,o),this.right.set(t,v,m,M),this.center.set(t,i[0],i[1],i[2]),this.radius.set(t,Math.log(f));var w=s*M-o*m,y=o*v-n*M,_=n*m-s*v,b=h(w,y,_),E=n*u+s*d+o*l,L=v*u+m*d+M*l,T=(w/=b)*u+(y/=b)*d+(_/=b)*l,R=Math.asin(c(E)),A=Math.atan2(T,L),P=this.angle._state,D=P[P.length-1],k=P[P.length-2];D%=2*Math.PI;var U=Math.abs(D+2*Math.PI-A),C=Math.abs(D-A),I=Math.abs(D-2*Math.PI-A);U<C&&(D+=2*Math.PI),I<C&&(D-=2*Math.PI),this.angle.jump(this.angle.lastT(),D,k),this.angle.set(t,A,R)}}}}},223:t=>{t.exports="#version 300 es\nprecision highp float;\n\nuniform vec3 u_Eye, u_Ref, u_Up;\nuniform vec2 u_Dimensions;\nuniform float u_Time;\n\nin vec2 fs_Pos;\nout vec4 out_Col;\n\nvoid main() {\n  out_Col = vec4(0.5 * (fs_Pos + vec2(1.0)), 0.5 * (sin(u_Time * 3.14159 * 0.01) + 1.0), 1.0);\n}\n"},240:t=>{t.exports="#version 300 es\nprecision highp float;\n\n// The vertex shader used to render the background of the scene\n\nin vec4 vs_Pos;\nout vec2 fs_Pos;\n\nvoid main() {\n  fs_Pos = vs_Pos.xy;\n  gl_Position = vs_Pos;\n}\n"}},e={};function i(r){var n=e[r];if(void 0!==n)return n.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,i),s.exports}i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";var t,e,r=1e-6,n="undefined"!=typeof Float32Array?Float32Array:Array;function s(){var t=new n(3);return n!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function o(t,e,i){var r=new n(3);return r[0]=t,r[1]=e,r[2]=i,r}function a(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function u(e){t=e}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),s(),e=new n(4),n!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0);const h=class{constructor(){this.count=0,this.idxBound=!1,this.posBound=!1}destory(){t.deleteBuffer(this.bufIdx),t.deleteBuffer(this.bufPos)}generateIdx(){this.idxBound=!0,this.bufIdx=t.createBuffer()}generatePos(){this.posBound=!0,this.bufPos=t.createBuffer()}bindIdx(){return this.idxBound&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.bufIdx),this.idxBound}bindPos(){return this.posBound&&t.bindBuffer(t.ARRAY_BUFFER,this.bufPos),this.posBound}elemCount(){return this.count}drawMode(){return t.TRIANGLES}},c=class extends h{constructor(t){var e,i,r,s;super(),this.center=(e=t[0],i=t[1],r=t[2],(s=new n(4))[0]=e,s[1]=i,s[2]=r,s[3]=1,s)}create(){this.indices=new Uint32Array([0,1,2,0,2,3]),this.positions=new Float32Array([-1,-1,.999,1,1,-1,.999,1,1,1,.999,1,-1,1,.999,1]),this.generateIdx(),this.generatePos(),this.count=this.indices.length,t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.bufIdx),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.bufPos),t.bufferData(t.ARRAY_BUFFER,this.positions,t.STATIC_DRAW),console.log("Created square")}},d=class{constructor(t){this.canvas=t}setClearColor(e,i,r,n){t.clearColor(e,i,r,n)}setSize(t,e){this.canvas.width=t,this.canvas.height=e}clear(){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}render(t,e,i,r){e.setEyeRefUp(t.controls.eye,t.controls.center,t.controls.up),e.setTime(r);for(let t of i)e.draw(t)}};function l(){var t=new n(16);return n!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function f(t,e,i,n){var s,o,a,u,h,c,d,l,f,p,v=e[0],m=e[1],M=e[2],g=n[0],x=n[1],w=n[2],y=i[0],_=i[1],b=i[2];return Math.abs(v-y)<r&&Math.abs(m-_)<r&&Math.abs(M-b)<r?function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}(t):(d=v-y,l=m-_,f=M-b,s=x*(f*=p=1/Math.hypot(d,l,f))-w*(l*=p),o=w*(d*=p)-g*f,a=g*l-x*d,(p=Math.hypot(s,o,a))?(s*=p=1/p,o*=p,a*=p):(s=0,o=0,a=0),u=l*a-f*o,h=f*s-d*a,c=d*o-l*s,(p=Math.hypot(u,h,c))?(u*=p=1/p,h*=p,c*=p):(u=0,h=0,c=0),t[0]=s,t[1]=u,t[2]=d,t[3]=0,t[4]=o,t[5]=h,t[6]=l,t[7]=0,t[8]=a,t[9]=c,t[10]=f,t[11]=0,t[12]=-(s*v+o*m+a*M),t[13]=-(u*v+h*m+c*M),t[14]=-(d*v+l*m+f*M),t[15]=1,t)}var p=i(242);const v=class{constructor(t,e){this.projectionMatrix=l(),this.viewMatrix=l(),this.fovy=45,this.aspectRatio=1,this.near=.1,this.far=1e3,this.position=s(),this.direction=s(),this.target=s(),this.up=s(),this.controls=p(document.getElementById("canvas"),{eye:t,center:e}),a(this.target,this.position,this.direction),f(this.viewMatrix,this.controls.eye,this.controls.center,this.controls.up)}setAspectRatio(t){this.aspectRatio=t}updateProjectionMatrix(){var t,e,i,r,n,s,o;t=this.projectionMatrix,e=this.fovy,i=this.aspectRatio,r=this.near,n=this.far,o=1/Math.tan(e/2),t[0]=o/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(s=1/(r-n),t[10]=(n+r)*s,t[14]=2*n*r*s):(t[10]=-1,t[14]=-2*r)}update(){this.controls.tick(),a(this.target,this.position,this.direction),f(this.viewMatrix,this.controls.eye,this.controls.center,this.controls.up)}};var m=null;class M{constructor(e,i){if(this.shader=t.createShader(e),t.shaderSource(this.shader,i),t.compileShader(this.shader),!t.getShaderParameter(this.shader,t.COMPILE_STATUS))throw t.getShaderInfoLog(this.shader)}}const g=class{constructor(e){this.prog=t.createProgram();for(let i of e)t.attachShader(this.prog,i.shader);if(t.linkProgram(this.prog),!t.getProgramParameter(this.prog,t.LINK_STATUS))throw t.getProgramInfoLog(this.prog);this.attrPos=t.getAttribLocation(this.prog,"vs_Pos"),this.unifEye=t.getUniformLocation(this.prog,"u_Eye"),this.unifRef=t.getUniformLocation(this.prog,"u_Ref"),this.unifUp=t.getUniformLocation(this.prog,"u_Up"),this.unifDimensions=t.getUniformLocation(this.prog,"u_Dimensions"),this.unifTime=t.getUniformLocation(this.prog,"u_Time")}use(){m!==this.prog&&(t.useProgram(this.prog),m=this.prog)}setEyeRefUp(e,i,r){this.use(),-1!==this.unifEye&&t.uniform3f(this.unifEye,e[0],e[1],e[2]),-1!==this.unifRef&&t.uniform3f(this.unifRef,i[0],i[1],i[2]),-1!==this.unifUp&&t.uniform3f(this.unifUp,r[0],r[1],r[2])}setDimensions(e,i){this.use(),-1!==this.unifDimensions&&t.uniform2f(this.unifDimensions,e,i)}setTime(e){this.use(),-1!==this.unifTime&&t.uniform1f(this.unifTime,e)}draw(e){this.use(),-1!=this.attrPos&&e.bindPos()&&(t.enableVertexAttribArray(this.attrPos),t.vertexAttribPointer(this.attrPos,4,t.FLOAT,!1,0,0)),e.bindIdx(),t.drawElements(e.drawMode(),e.elemCount(),t.UNSIGNED_INT,0),-1!=this.attrPos&&t.disableVertexAttribArray(this.attrPos)}};let x,w=0;!function(){window.addEventListener("keypress",(function(t){t.key}),!1),window.addEventListener("keyup",(function(t){t.key}),!1);const t=document.getElementById("canvas"),e=t.getContext("webgl2");e||alert("WebGL 2 not supported!"),u(e),x=new c(o(0,0,0)),x.create();const r=new v(o(0,0,-10),o(0,0,0)),n=new d(t);n.setClearColor(164/255,233/255,1,1),e.enable(e.DEPTH_TEST);const s=new g([new M(e.VERTEX_SHADER,i(240)),new M(e.FRAGMENT_SHADER,i(223))]);window.addEventListener("resize",(function(){n.setSize(window.innerWidth,window.innerHeight),r.setAspectRatio(window.innerWidth/window.innerHeight),r.updateProjectionMatrix(),s.setDimensions(window.innerWidth,window.innerHeight)}),!1),n.setSize(window.innerWidth,window.innerHeight),r.setAspectRatio(window.innerWidth/window.innerHeight),r.updateProjectionMatrix(),s.setDimensions(window.innerWidth,window.innerHeight),function t(){r.update(),e.viewport(0,0,window.innerWidth,window.innerHeight),n.clear(),n.render(r,s,[x],w),w++,requestAnimationFrame(t)}()}()})()})();
//# sourceMappingURL=bundle.js.map